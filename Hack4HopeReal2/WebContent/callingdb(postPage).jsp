<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<%@ page import = "java.util.*" %>
<%@page import = "easy.User" %>
<%@page import = "ArtOfSecurity.SecurityInDetail" %>
<%Class.forName("com.mysql.jdbc.Driver");%>

<html>
<head>

<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<link rel="stylesheet" href="main.css" type="text/css">
<link href='https://fonts.googleapis.com/css?family=Amatic SC' rel='stylesheet'>
<link href='https://fonts.googleapis.com/css?family=Bungee Inline' rel='stylesheet'>
<link href='https://fonts.googleapis.com/css?family=Bungee Shade' rel='stylesheet'>

<title>Posted!</title>

</head>

<body>
<div class="sidebar">
<img src="h4h.png"  float:right;float:left;width="200" height="200">
<a href="HomePage.jsp" >Home Page</a>
<a href="PostPage.jsp" ;>Post Page</a>
<a href="LogInPage.jsp">Login Page</a>
<a href="SignupPage.jsp">SignUp Page</a>
<a href="leaderBoard.jsp">Leader Board</a>

</div>

<div class="posts">
<br>
<h1>Hack4Hope Community Forum</h1>
<%
try{
	

%>
<%
int s = response.getStatus(); 
if( s > 200){
	response.sendRedirect("FileNotFound.jsp");
}
//Created By Nick stone 
 //Secure the content from the Form 
  String Username = request.getParameter("Username");
  String title = request.getParameter("PostTitle");
  String content = request.getParameter("Postcontent");
  //Run the Strings through the Java SCript detection
  Username = ArtOfSecurity.SecurityInDetail.parsejavascript(Username);
  title = ArtOfSecurity.SecurityInDetail.parsejavascript(title);
  content = ArtOfSecurity.SecurityInDetail.parsejavascript(content);
  
 content = ArtOfSecurity.SecurityInDetail.parses(content); 
 Username =  ArtOfSecurity.SecurityInDetail.parses(Username); 
 title = ArtOfSecurity.SecurityInDetail.parses(title); 
 
%>

<% 
//Grab the content and run through the vulgar check!
String incontent = easy.sortings.vulgarcheck(content);               

//Now run the content through the security
incontent = ArtOfSecurity.SecurityInDetail.parsejavascript(incontent);

%>


<% easy.call.insertPosts(Username, title, incontent); %>


<%easy.onejavaToRuleThemAll.addp(title,content); %>
Hello the post <%=title%> has been posted to the Home Page

Your post was <%=incontent %>

<% 
} 
catch(Exception e){
	response.sendRedirect("FileNoutFound"); 
}

%>

</body>
</html>